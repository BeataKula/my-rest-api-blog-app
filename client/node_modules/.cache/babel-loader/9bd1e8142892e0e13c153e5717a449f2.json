{"ast":null,"code":"import _ from \"lodash\";\nimport { getPosts, getUserById } from \"../apis/jsonPlaceholder\";\nexport const fetchPostsAndUsers = () => async (dispatch, getState) => {\n  await dispatch(fetchPosts());\n\n  _.chain(getState().postsReducer).map(\"userId\").uniq().forEach(id => dispatch(fetchUser(id))).value();\n};\nexport const fetchPosts = () => async dispatch => {\n  const response = await getPosts();\n  dispatch({\n    type: \"FETCH_POSTS\",\n    payload: response.data\n  });\n};\nexport const fetchUser = id => async dispatch => {\n  const response = await getUserById(id);\n  const payload = {\n    userById: {\n      data: response.data,\n      error: false,\n      isLoading: false\n    }\n  };\n  dispatch({\n    type: \"GET_USERS_BY_ID_SUCCESS\",\n    payload: payload\n  });\n};","map":{"version":3,"sources":["/home/beatakula/workspace/react/my-blog-app/src/actions/index.js"],"names":["_","getPosts","getUserById","fetchPostsAndUsers","dispatch","getState","fetchPosts","chain","postsReducer","map","uniq","forEach","id","fetchUser","value","response","type","payload","data","userById","error","isLoading"],"mappings":"AAAA,OAAOA,CAAP,MAAc,QAAd;AACA,SAASC,QAAT,EAAmBC,WAAnB,QAAsC,yBAAtC;AAEA,OAAO,MAAMC,kBAAkB,GAAG,MAAM,OAAOC,QAAP,EAAiBC,QAAjB,KAA8B;AAClE,QAAMD,QAAQ,CAACE,UAAU,EAAX,CAAd;;AAEAN,EAAAA,CAAC,CAACO,KAAF,CAAQF,QAAQ,GAAGG,YAAnB,EACKC,GADL,CACS,QADT,EAEKC,IAFL,GAGKC,OAHL,CAGcC,EAAD,IAAQR,QAAQ,CAACS,SAAS,CAACD,EAAD,CAAV,CAH7B,EAIKE,KAJL;AAKH,CARM;AAUP,OAAO,MAAMR,UAAU,GAAG,MAAM,MAAOF,QAAP,IAAoB;AAChD,QAAMW,QAAQ,GAAG,MAAMd,QAAQ,EAA/B;AAEAG,EAAAA,QAAQ,CAAC;AAAEY,IAAAA,IAAI,EAAE,aAAR;AAAuBC,IAAAA,OAAO,EAAEF,QAAQ,CAACG;AAAzC,GAAD,CAAR;AACH,CAJM;AAMP,OAAO,MAAML,SAAS,GAAID,EAAD,IAAQ,MAAOR,QAAP,IAAoB;AACjD,QAAMW,QAAQ,GAAG,MAAMb,WAAW,CAACU,EAAD,CAAlC;AAEA,QAAMK,OAAO,GAAG;AACZE,IAAAA,QAAQ,EAAE;AACND,MAAAA,IAAI,EAAEH,QAAQ,CAACG,IADT;AAENE,MAAAA,KAAK,EAAE,KAFD;AAGNC,MAAAA,SAAS,EAAE;AAHL;AADE,GAAhB;AAQAjB,EAAAA,QAAQ,CAAC;AAAEY,IAAAA,IAAI,EAAE,yBAAR;AAAmCC,IAAAA,OAAO,EAAEA;AAA5C,GAAD,CAAR;AACH,CAZM","sourcesContent":["import _ from \"lodash\";\nimport { getPosts, getUserById } from \"../apis/jsonPlaceholder\";\n\nexport const fetchPostsAndUsers = () => async (dispatch, getState) => {\n    await dispatch(fetchPosts());\n\n    _.chain(getState().postsReducer)\n        .map(\"userId\")\n        .uniq()\n        .forEach((id) => dispatch(fetchUser(id)))\n        .value();\n};\n\nexport const fetchPosts = () => async (dispatch) => {\n    const response = await getPosts();\n\n    dispatch({ type: \"FETCH_POSTS\", payload: response.data });\n};\n\nexport const fetchUser = (id) => async (dispatch) => {\n    const response = await getUserById(id);\n\n    const payload = {\n        userById: {\n            data: response.data,\n            error: false,\n            isLoading: false,\n        },\n    };\n\n    dispatch({ type: \"GET_USERS_BY_ID_SUCCESS\", payload: payload });\n};\n"]},"metadata":{},"sourceType":"module"}